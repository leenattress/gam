<!doctype html>
<html>

<head lang='en'>
  <meta charset='utf-8'>
  <meta
    name='viewport'
    content='width=device-width'
  >
  <title>Gam example</title>
  <link
    rel="stylesheet"
    href="../../style.css"
  >
</head>

<body>

  <input
    type="checkbox"
    id="switch"
    checked
  >

  <div class="container">
    <canvas
      id="canvas"
      class="screen"
    ></canvas>
    <div class="overlay"><span class="crt-colorsep">SPRITES</span></div>
    <div class="vignette"></div>
  </div>

  <canvas id="debug"></canvas>

  <script type="module">

    // Insert our game cartridge
    import { Game as G, PAL } from '../lib/gam.esm.js';

    // Load sprites in the init function
    async function init() {
      await G.stage.addSprite('sonic', 'sonic.png');
      await G.stage.addSprite('sonic2', 'sonic2.png');
      await G.stage.addSprite('sonic3', 'sonic3.png');
      await G.stage.addSprite('sonic-waterfall', 'sonic-waterfall.png');
    }

    // update runs at 60fps
    function update() {

      // clear the stage
      G.stage.cls(PAL.BLACK)

      // display a grid of cropped sprites
      G.stage.drawSprite('sonic', 8, 8, { width: 128-16, height: 96-16, offsetX: 64, offsetY: 64 })
      G.stage.drawSprite('sonic2', 128, 8, { width: 128-16, height: 96-16, offsetX: 64, offsetY: 64 })
      G.stage.drawSprite('sonic3', 8, 96, { width: 128-16, height: 96-16, offsetX: 64, offsetY: 64 })
      G.stage.drawSprite('sonic-waterfall', 128, 96, { width: 128-16, height: 96-16, offsetX: 64, offsetY: 64 })
    
    }

    // Turn the console on
    G.powerOn({
      target: 'canvas',
      init,
      update
    });

  </script>
</body>

</html>